[{"path":"https://tiffanymtang.github.io/causalDT/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2024 causalDT authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"First Last. Author, maintainer.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Last F (2024). causalDT: Package (One Line, Title Case). R package version 0.0.0.9000, https://tiffanymtang.github.io/causalDT/.","code":"@Manual{,   title = {causalDT: What the Package Does (One Line, Title Case)},   author = {First Last},   year = {2024},   note = {R package version 0.0.0.9000},   url = {https://tiffanymtang.github.io/causalDT/}, }"},{"path":"https://tiffanymtang.github.io/causalDT/index.html","id":"causaldt","dir":"","previous_headings":"","what":"What the Package Does (One Line, Title Case)","title":"What the Package Does (One Line, Title Case)","text":"goal causalDT …","code":""},{"path":"https://tiffanymtang.github.io/causalDT/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"What the Package Does (One Line, Title Case)","text":"can install development version causalDT GitHub :","code":"# install.packages(\"pak\") pak::pak(\"tiffanymtang/causalDT\")"},{"path":"https://tiffanymtang.github.io/causalDT/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"What the Package Does (One Line, Title Case)","text":"basic example shows solve common problem:","code":"library(causalDT) ## basic example code"},{"path":"https://tiffanymtang.github.io/causalDT/reference/causalDT.html","id":null,"dir":"Reference","previous_headings":"","what":"Causal Distillation Trees — causalDT","title":"Causal Distillation Trees — causalDT","text":"TODO","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/causalDT.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Causal Distillation Trees — causalDT","text":"","code":"causalDT(   X,   Y,   Z,   holdout_prop = 0.3,   holdout_idxs = NULL,   teacher_model = \"causal_forest\",   teacher_predict = NULL,   student_model = \"rpart\",   rpart_control = NULL,   nfolds_crossfit = NULL,   nreps_crossfit = NULL,   B_stability = 100,   max_depth_stability = NULL,   ... )"},{"path":"https://tiffanymtang.github.io/causalDT/reference/causalDT.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Causal Distillation Trees — causalDT","text":"X tibble, data.frame, matrix covariates. Y vector outcomes. Z vector treatments. holdout_prop Proportion data hold honest estimation treatment effects. Used holdout_idxs NULL. holdout_idxs vector indices hold honest estimation treatment effects. NULL, holdout set size holdout_prop x nrow(X) randomly selected. teacher_model Teacher model used estimate individual-level treatment events. either \"causal_forest\" (default) function. \"causal_forest\", grf::causal_forest() used teacher model. Otherwise, function take named arguments X, Y, Z, (corresponding covariates, outcome, treatment data, respectively) well (optional) additional arguments passed function via .... Moreover, function return model object can used predict individual-level treatment effects using teacher_predict(teacher_model, x). teacher_predict Function used predict individual-level treatment effects teacher model. take two arguments. input: first model object returned teacher_model, second tibble, data.frame, matrix covariates. NULL, default predict(). student_model Student model used estimate subgroups individuals corresponding estimated treatment effects. either \"rpart\" (default) function. \"rpart\", rpart::rpart() used. Otherwise, function take two arguments input: first tibble, data.frame, matrix covariates, second vector predicted individual-level treatment effects. Moreover, function return list. minimum, list contain one element named fit model object can used output leaf membership indices observation via predict(student_model, x, type = 'node'). general, recommend using default \"rpart\". rpart_control list control parameters rpart algorithm. See ? rpart.control details. Used student_model \"rpart\". nfolds_crossfit Number folds cross-fitting procedure. teacher_model \"causal_forest\", default 1 (cross-fitting performed). Otherwise, default 2 (one fold training teacher model one fold estimating individual-level treatment effects). nreps_crossfit Number repetitions cross-fitting procedure. teacher_model \"causal_forest\", default 1 (cross-fitting performed). Otherwise, default 50. B_stability Number bootstrap samples use evaluating stability diagnostics. Default 100. Stability diagnostics performed student_model rpart object. B_stability 0, stability diagnostics performed. max_depth_stability Maximum depth decision tree used evaluating stability diagnostics. NULL, default max(4, max depth fitted student model). ... Additional arguments passed teacher_model function.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/causalDT.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Causal Distillation Trees — causalDT","text":"list following elements: estimate Estimated subgroup average treatment effects tibble following columns: leaf_id - Leaf node identifier. subgroup - String representation subgroup. estimate - Estimated conditional average treatment effect subgroup. variance - Asymptotic variance estimated conditional average treatment effect. .var1 - Sample variance treated observations subgroup. .var0 - Sample variance control observations subgroup. .n1 - Number treated observations subgroup. .n0 - Number control observations subgroup. .sample_idxs - Indices (holdout) observations subgroup. student_fit Output student_model(), can vary. student_model \"rpart\", output list following elements: fit - fitted student model. rpart model object. tree_info - data.frame tree structure/split information. subgroups - list subgroups given string representation. predictions - Student model predictions training (non-holdout) data. teacher_fit list (cross-fitted) teacher model fits. teacher_predictions predicted individual-level treatment effects, averaged across cross-fitted teacher model. teacher_predictions_ls list predicted individual-level treatment effects (cross-fitted) teacher model fit. crossfit_idxs_ls list fold indices used cross-fit. stability_diagnostics list stability diagnostics following elements: jaccard_mean - Vector mean Jaccard similarity index tree depth. tree depth given vector index. jaccard_distribution - List Jaccard similarity indices across bootstraps tree depth. bootstrap_predictions - List mean student model predictions (training (non-holdout) data) across bootstraps tree depth. bootstrap_predictions_var - List variance student model predictions (training (non-holdout) data) across bootstraps tree depth. leaf_ids - List leaf node identifiers, indicating leaf membership training sample (original) fitted student model. holdout_idxs Indices holdout set.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/causalDT.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Causal Distillation Trees — causalDT","text":"","code":"n <- 100 p <- 5 X <- matrix(rnorm(n * p), nrow = n, ncol = p) Z <- rbinom(n, 1, 0.5) Y <- 2 * Z * (X[, 1] > 0) + X[, 2] + rnorm(n, 0.1)  # causal distillation trees using causal forest teacher model out <- causalDT(X, Y, Z)  if (FALSE) { # \\dontrun{ # causal distillation trees using rboost teacher model out <- causalDT(X, Y, Z, teacher_model = rboost) } # }"},{"path":"https://tiffanymtang.github.io/causalDT/reference/crossfit.html","id":null,"dir":"Reference","previous_headings":"","what":"Crossfit wrapper around estimators — crossfit","title":"Crossfit wrapper around estimators — crossfit","text":"Crossfit wrapper around estimators","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/crossfit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Crossfit wrapper around estimators — crossfit","text":"","code":"crossfit(estimator, X, Y, Z, split_idxs, ...)"},{"path":"https://tiffanymtang.github.io/causalDT/reference/dot-list.rules.party.html","id":null,"dir":"Reference","previous_headings":"","what":"Get list of rules from a party model. — .list.rules.party","title":"Get list of rules from a party model. — .list.rules.party","text":"copy partykit:::.list.rules.party() exported use causal distillation tree framework.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/dot-list.rules.party.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get list of rules from a party model. — .list.rules.party","text":"","code":".list.rules.party(x, i = NULL, ...)"},{"path":"https://tiffanymtang.github.io/causalDT/reference/estimate_group_cates.html","id":null,"dir":"Reference","previous_headings":"","what":"Subgroup CATE estimation. — estimate_group_cates","title":"Subgroup CATE estimation. — estimate_group_cates","text":"function estimates conditional average treatment effect subgroup given fitted decision tree. conditional average treatment effect estimated difference average outcome treated control units fall within subgroup (.e., leaf node decision tree).","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/estimate_group_cates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Subgroup CATE estimation. — estimate_group_cates","text":"","code":"estimate_group_cates(fit, X, Y, Z)"},{"path":"https://tiffanymtang.github.io/causalDT/reference/estimate_group_cates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Subgroup CATE estimation. — estimate_group_cates","text":"fit Fitted subgroup model used determine subgroup membership individuals. Typically, party rpart object, model object can used determine subgroup membership via predict(fit, x, type = 'node') can used. X tibble, data.frame, matrix covariates. Y vector outcomes. Z vector treatments.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/estimate_group_cates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Subgroup CATE estimation. — estimate_group_cates","text":"Estimated subgroup average treatment effects tibble following columns: leaf_id Leaf node identifier. subgroup String representation subgroup. estimate Estimated conditional average treatment effect subgroup. variance Asymptotic variance estimated conditional average treatment effect. .var1 Sample variance treated observations subgroup. .var0 Sample variance control observations subgroup. .n1 Number treated observations subgroup. .n0 Number control observations subgroup. .sample_idxs Indices (holdout) observations subgroup.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/estimate_group_cates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Subgroup CATE estimation. — estimate_group_cates","text":"","code":"n <- 100 p <- 5 X <- matrix(rnorm(n * p), nrow = n, ncol = p) Z <- rbinom(n, 1, 0.5) Y <- 2 * Z * (X[, 1] > 0) + X[, 2] + rnorm(n, 0.1)  # causal distillation tree output out <- causalDT(X, Y, Z) # compute subgroup CATEs manually group_cates <- estimate_group_cates(   out$student_fit$fit,   X = X[out$holdout_idxs, , drop = FALSE],   Y = Y[out$holdout_idxs],   Z = Z[out$holdout_idxs] ) all.equal(out$estimate, group_cates) #> [1] TRUE"},{"path":"https://tiffanymtang.github.io/causalDT/reference/evaluate_subgroup_stability.html","id":null,"dir":"Reference","previous_headings":"","what":"Subgroup stability diagnostics — evaluate_subgroup_stability","title":"Subgroup stability diagnostics — evaluate_subgroup_stability","text":"TODO","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/evaluate_subgroup_stability.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Subgroup stability diagnostics — evaluate_subgroup_stability","text":"","code":"evaluate_subgroup_stability(   estimator,   fit,   X,   y,   Z = NULL,   rpart_control = NULL,   B = 100,   max_depth = NULL )"},{"path":"https://tiffanymtang.github.io/causalDT/reference/evaluate_subgroup_stability.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Subgroup stability diagnostics — evaluate_subgroup_stability","text":"estimator Function used estimate subgroups individuals corresponding estimated treatment effects. function take X, y, optionally Z (input NULL) return model fit (e.g,. output rpart) can coerced party object via partykit::as_party(). Typically, student_rpart used estimator. fit Fitted subgroup model (often, output estimator()). Mainly used determine appropriate max_depth stability diagnostics. fit rpart object, stability diagnostics skipped. X tibble, data.frame, matrix covariates. y vector responses predict. Z vector treatments. rpart_control list control parameters rpart algorithm. See ? rpart.control details. B Number bootstrap samples use evaluating stability diagnostics. Default 100. max_depth Maximum depth tree consider evaluating stability diagnostics. NULL, default max(4, max depth fit).","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/evaluate_subgroup_stability.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Subgroup stability diagnostics — evaluate_subgroup_stability","text":"list following elements: jaccard_mean Vector mean Jaccard similarity index tree depth. tree depth given vector index. jaccard_distribution List Jaccard similarity indices across bootstraps tree depth. bootstrap_predictions List mean student model predictions (training (non-holdout) data) across bootstraps tree depth. bootstrap_predictions_var List variance student model predictions (training (non-holdout) data) across bootstraps tree depth. leaf_ids List leaf node identifiers, indicating leaf membership training sample (original) fitted student model.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/evaluate_subgroup_stability.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Subgroup stability diagnostics — evaluate_subgroup_stability","text":"","code":"n <- 200 p <- 10 X <- matrix(rnorm(n * p), nrow = n, ncol = p) Z <- rbinom(n, 1, 0.5) Y <- 2 * Z * (X[, 1] > 0) + X[, 2] + rnorm(n, 0.1)  # run causal distillation trees without stability diagnostics out <- causalDT(X, Y, Z, B_stability = 0) # run stability diagnostics manually stability_out <- evaluate_subgroup_stability(   estimator = student_rpart,   fit = out$student_fit$fit,   X = X[-out$holdout_idxs, , drop = FALSE],   y = out$student_fit$predictions )"},{"path":"https://tiffanymtang.github.io/causalDT/reference/get_party_node_depths.html","id":null,"dir":"Reference","previous_headings":"","what":"Get depth of each node in a party model. — get_party_node_depths","title":"Get depth of each node in a party model. — get_party_node_depths","text":"Get depth node party model.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/get_party_node_depths.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get depth of each node in a party model. — get_party_node_depths","text":"","code":"get_party_node_depths(party_fit, return_features = FALSE)"},{"path":"https://tiffanymtang.github.io/causalDT/reference/get_party_node_depths.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get depth of each node in a party model. — get_party_node_depths","text":"party_fit party object. return_features Logical indicating whether return feature associated node.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/get_party_paths.html","id":null,"dir":"Reference","previous_headings":"","what":"Get decision paths from a party model. — get_party_paths","title":"Get decision paths from a party model. — get_party_paths","text":"Return decision paths leaf node party model character strings.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/get_party_paths.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get decision paths from a party model. — get_party_paths","text":"","code":"get_party_paths(party_fit)"},{"path":"https://tiffanymtang.github.io/causalDT/reference/get_party_paths.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get decision paths from a party model. — get_party_paths","text":"party_fit party object.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/get_party_paths.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get decision paths from a party model. — get_party_paths","text":"list character vectors, element corresponds decision path leaf node party_fit model.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/get_rpart_paths.html","id":null,"dir":"Reference","previous_headings":"","what":"Get decision paths from an rpart model. — get_rpart_paths","title":"Get decision paths from an rpart model. — get_rpart_paths","text":"Return decision paths leaf node rpart model character strings.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/get_rpart_paths.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get decision paths from an rpart model. — get_rpart_paths","text":"","code":"get_rpart_paths(rpart_fit)"},{"path":"https://tiffanymtang.github.io/causalDT/reference/get_rpart_paths.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get decision paths from an rpart model. — get_rpart_paths","text":"rpart_fit rpart object.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/get_rpart_paths.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get decision paths from an rpart model. — get_rpart_paths","text":"list character vectors, element corresponds decision path leaf node rpart_fit model.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/get_rpart_tree_info.html","id":null,"dir":"Reference","previous_headings":"","what":"Get split information from an rpart model. — get_rpart_tree_info","title":"Get split information from an rpart model. — get_rpart_tree_info","text":"Return split information node rpart model data frame.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/get_rpart_tree_info.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get split information from an rpart model. — get_rpart_tree_info","text":"","code":"get_rpart_tree_info(rpart_fit, digits = getOption(\"digits\"))"},{"path":"https://tiffanymtang.github.io/causalDT/reference/get_rpart_tree_info.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get split information from an rpart model. — get_rpart_tree_info","text":"rpart_fit rpart object. digits Number digits round split values .","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/get_rpart_tree_info.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get split information from an rpart model. — get_rpart_tree_info","text":"data.frame information regarding feature/threshold used split rpart model.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/predict_crossfit.html","id":null,"dir":"Reference","previous_headings":"","what":"Predict method for cross-fitted estimators — predict_crossfit","title":"Predict method for cross-fitted estimators — predict_crossfit","text":"Predict method cross-fitted estimators","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/predict_crossfit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predict method for cross-fitted estimators — predict_crossfit","text":"","code":"predict_crossfit(fits, X, split_idxs, predict_fun)"},{"path":"https://tiffanymtang.github.io/causalDT/reference/shared_args.html","id":null,"dir":"Reference","previous_headings":"","what":"Arguments that are shared across functions — shared_args","title":"Arguments that are shared across functions — shared_args","text":"Arguments shared across functions","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/shared_args.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Arguments that are shared across functions — shared_args","text":"X tibble, data.frame, matrix covariates. Y vector outcomes. y vector responses predict. Z vector treatments. rpart_control list control parameters rpart algorithm. See ? rpart.control details. rpart_fit rpart object. party_fit party object.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/student_rpart.html","id":null,"dir":"Reference","previous_headings":"","what":"Rpart wrapper for causal distillation trees. — student_rpart","title":"Rpart wrapper for causal distillation trees. — student_rpart","text":"function wrapper around rpart::rpart() can easily used student model causal distillation tree framework.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/student_rpart.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Rpart wrapper for causal distillation trees. — student_rpart","text":"","code":"student_rpart(X, y, method = \"anova\", rpart_control = NULL, fit_only = FALSE)"},{"path":"https://tiffanymtang.github.io/causalDT/reference/student_rpart.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Rpart wrapper for causal distillation trees. — student_rpart","text":"X tibble, data.frame, matrix covariates. y vector responses predict. method method argument rpart::rpart(). Default \"anova\". See rpart::rpart() details. rpart_control list control parameters rpart algorithm. See ? rpart.control details. fit_only Logical. TRUE, fitted model returned. Default FALSE.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/student_rpart.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Rpart wrapper for causal distillation trees. — student_rpart","text":"fit_only = TRUE, fitted model returned. Otherwise, list following components returned: fit Fitted model. rpart model object. tree_info Data frame tree structure/split information. subgroups List subgroups given string representation. predictions Student model predictions given X data.","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/teacher_models.html","id":null,"dir":"Reference","previous_headings":"","what":"Teacher models for causal distillation trees — teacher_models","title":"Teacher models for causal distillation trees — teacher_models","text":"functions wrappers around various heterogeneous treatment effect learners (associated predict methods) can easily used teacher models causal distillation tree framework. causal_forest(): wrapper around grf::causal_forest() predict_causal_forest(): wrapper around predict() causal_forest() models. rboost(): wrapper around rlearner::rboost() rlasso(): wrapper around rlearner::rlasso() rkern(): wrapper around rlearner::rkern()","code":""},{"path":"https://tiffanymtang.github.io/causalDT/reference/teacher_models.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Teacher models for causal distillation trees — teacher_models","text":"","code":"causal_forest(X, Y, Z, ...)  predict_causal_forest(...)  rboost(X, Y, Z, ...)  rlasso(X, Y, Z, ...)  rkern(X, Y, Z, ...)"},{"path":"https://tiffanymtang.github.io/causalDT/reference/teacher_models.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Teacher models for causal distillation trees — teacher_models","text":"X tibble, data.frame, matrix covariates. Y vector outcomes. Z vector treatments. ... Additional arguments pass base model functions.","code":""}]
